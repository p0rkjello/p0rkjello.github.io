<!doctype html><html lang=en><head><title>m0n0wall site to site VPN ::
misctechmusings.com — notebook for projects, problems, and solution</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Configuring site to site VPN using two m0n0wall boxes is a snap.
There are a couple of things you will want to know ahead of time.
The IP address or FQDN of both firewalls WAN interface. Internal subnet of both networks. The shared key (password). Log into your firewall and head to the VPN/IPSec section. Click the + sign to get started. Assuming you are connecting two boxes across the internet, set the Interface to &amp;ldquo;WAN&amp;rdquo;."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://p0rkjello.github.io/m0n0wall-site-to-site-vpn/><link rel=stylesheet href=https://p0rkjello.github.io/assets/style.css><link rel=stylesheet href=https://p0rkjello.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://p0rkjello.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://p0rkjello.github.io/img/favicon.png><link href=https://p0rkjello.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://p0rkjello.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://p0rkjello.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://p0rkjello.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://p0rkjello.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://p0rkjello.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="m0n0wall site to site VPN"><meta name=twitter:description content="Configuring site to site VPN using two m0n0wall boxes is a snap.
There are a couple of things you will want to know ahead of time.
The IP address or FQDN of both firewalls WAN interface. Internal subnet of both networks. The shared key (password). Log into your firewall and head to the VPN/IPSec section. Click the + sign to get started. Assuming you are connecting two boxes across the internet, set the Interface to &ldquo;WAN&rdquo;."><meta property="og:title" content="m0n0wall site to site VPN"><meta property="og:description" content="Configuring site to site VPN using two m0n0wall boxes is a snap.
There are a couple of things you will want to know ahead of time.
The IP address or FQDN of both firewalls WAN interface. Internal subnet of both networks. The shared key (password). Log into your firewall and head to the VPN/IPSec section. Click the + sign to get started. Assuming you are connecting two boxes across the internet, set the Interface to &ldquo;WAN&rdquo;."><meta property="og:type" content="article"><meta property="og:url" content="https://p0rkjello.github.io/m0n0wall-site-to-site-vpn/"><meta property="article:section" content="posts"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>/misc/tech/musings</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>m0n0wall site to site VPN</h1><div class=post-meta></div><span class=post-tags><a href=https://p0rkjello.github.io/tags/m0n0wall/>#m0n0wall</a>&nbsp;
<a href=https://p0rkjello.github.io/tags/vpn/>#vpn</a>&nbsp;</span><div class=post-content><p>Configuring site to site VPN using two m0n0wall boxes is a snap.</p><p>There are a couple of things you will want to know ahead of time.</p><ul><li>The IP address or FQDN of both firewalls WAN interface.</li><li>Internal subnet of both networks.</li><li>The shared key (password).</li></ul><p>Log into your firewall and head to the VPN/IPSec section. Click the + sign to get started.
Assuming you are connecting two boxes across the internet, set the <strong>Interface</strong> to &ldquo;WAN&rdquo;.
The <strong>Local subnet</strong> should be set to &ldquo;LAN subnet&rdquo;
As the name implies, set the <strong>Remote subnet</strong> to the remote subnet in the form of &ldquo;192.168.0.0&rdquo; (verify the subnet in the Interfaces: LAN page of the remote firewall).
Set the <strong>Remote gateway</strong> to either the public IP or FQDN of the remote box.</p><p><img src=/assets/img/m0n0wall-vpn-tunnel.jpg alt=m0n0wall-vpn-tunnel></p><p><strong>Important:</strong> Using the settings Local & Remote subnet settings above both ends will have complete access to each others LAN. Modify these settings and/or your firewall rules accordingly.</p><p><strong>Negotiation mode</strong> = aggressive
For <strong>My identifier</strong> choose the appropriate item from the drop down list. I am using &ldquo;Domain name&rdquo; in the example image. The identified should be the domain name of your local firewall.</p><ul><li><strong>Encryption algorithm</strong> = Blowfish</li><li><strong>Hash algorithm</strong> = SHA1</li><li><strong>DH key group</strong> = 2</li><li><strong>Lifetime</strong> default 28800</li><li><strong>Authentication method</strong> = Pre-shared key</li><li><strong>Pre-Shared Key</strong> = A password you will be using on both ends.</li></ul><p><img src=/assets/img/m0n0wall-vpn-phase1.jpg alt=m0n0wall-vpn-phase1></p><ul><li><strong>Protocol</strong> = ESP</li><li><strong>Encryption algorithms</strong> check Blowfish</li><li><strong>Hash algorithms</strong> check SHA1</li><li><strong>PFS key group</strong> = 2</li><li><strong>Lifetime</strong> default 86400</li></ul><p><img src=/assets/img/m0n0wall-vpn-phase2.jpg alt=m0n0wall-vpn-phase2></p><p>Once completed you will need to apply the same settings to the other m0n0wall system. <strong>Remote subnet</strong>, <strong>Remote gateway</strong> and My <strong>Identifier</strong> will need to be reversed.</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://p0rkjello.github.io/lenovo-t400-will-not-power-on/><span class=button__icon>←</span>
<span class=button__text>Lenovo T400 will not power on</span></a></span>
<span class="button next"><a href=https://p0rkjello.github.io/medibuntu-repositories/><span class=button__text>Medibuntu Repositories</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>/misc/tech/musings</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2023 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://p0rkjello.github.io/assets/main.js></script>
<script src=https://p0rkjello.github.io/assets/prism.js></script></div></body></html>